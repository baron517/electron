<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试</title>
	
	<style>
		*{margin:0;padding:0;}
		body,html{width:1920;height:1080px;}
	
	</style>
	
</head>
<body>


    <canvas id="cvs" width="1920" height="1080"></canvas>

	<div id="test" style="width:500px;height:500px;background:#ccc;position:absolute;left:0;top:0;display:none;"></div>
 


<script src="http://apps.bdimg.com/libs/jquery/1.8.0/jquery.min.js"></script>

</body>
</html>

 <script>
 
 $(window).keydown(function (e) {
if (e.keyCode == '116') {

		window.location.reload();

}
})

//$("#test").animate({"left":"600px"},5000);
 
 
 /*
 
 // 图片路径
var imgsrc=[];
for(var i=1;i<=1500;i++)
{
    imgsrc.push("img/1 ("+i+").png");
}

function loadImage(url)
        {
            var img = new Image();
            img.src = url;

            // 判断图片是否在缓存中
            if(img.complete){
                
                return;
            }

            // 图片加载到浏览器的缓存中回调函数
            img.onload = function(){
                
            }
        }

       

        var imgs = imgsrc;
        for(var i = 0;i<imgs.length;i++)
        {
            
            loadImage(imgs[i]);
        }

*/



function loadUrl(uri,callback){

	
	if(uri>831)
	{
		clearInterval(timer);
		return false;
	}	
	

	uri=imgsrc[uri];
	if(typeof callback!='function'){
		callback=function(uri){
			console.log(uri);
		}
	}
	var xhr = new XMLHttpRequest();
	xhr.responseType = 'text';
	xhr.onload = function() {
		callback(xhr.response);
	}
	xhr.open('GET', uri, true);
	xhr.send();
	
	i++;
}
 
//使用方法
var imgsrc=[];
for(var j=1;j<=832;j++)
{
    imgsrc.push("img/1 ("+j+").png");
}

var i=0;

var timer=setInterval(function()
{
   
	loadUrl(i,function(data){
		//Do some thing while image is load
	});
	

},20);





var myImage=document.getElementById("cvs");

var cxt=myImage.getContext("2d");

var img=new Image();





img.onload=function()
{

  console.log(progress);
  cxt.clearRect(0,0,1920,1080);
  cxt.fillRect(0, 0, 1920, 1080);
  cxt.drawImage(img,0,0,1920,1080);
}


var progress=0;
function step(timestamp) {

	img.src=imgsrc[progress];
	
    progress += 1;
    
	
	
    if (progress > 831) {
        progress=0;
    }
	
	requestAnimationFrame(step);
}
requestAnimationFrame(step);

console.log("#####");



</script>



</body>
</html>